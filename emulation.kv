#:import NoTransition kivy.uix.screenmanager.NoTransition
#:import ScreenManager kivy.uix.screenmanager
#:import dba database_access

WindowManager:
    transition: NoTransition()
    HomeWindow:
    BrowseWindow:
    ManageWindow:
    GenerateUsersWindow:

<GoBackBtn@Button>
    text: "Go Back"
    on_release:
        app.root.current = "homeWin"
   # background_color: 0.3, 0.4, 0.5, 1
    size_hint: .12, .08
    pos_hint: {"x": 0, "y": 0.92}



<HomeWindow>:
    name: "homeWin"

    GridLayout:
        cols: 1

        Label:
            text: "Emulation app (Alpha v 0.0.3)"
            bold: True
            italic: True
            color: 1,1,1,1


        GridLayout:
            cols: 2

            Button:
                id: browseBtn
                text: "Browse users"
                on_release:
                    app.root.current = "browseWin"

            Button:
                id: manageBtn
                text: "Manage users"
                on_release:
                    app.root.current = "manageWin"
        Button:
            id: generateUsersBtn
            text: "Generate users"
            on_release:
                app.root.current = "generateWin"

<BrowseWindow>:
    name: "browseWin"

    GoBackBtn:
    TextInput:
        id: browseInputOut
        size_hint: 1, .82
      #  pos_hint: (0, 60)
        pos_hint: {"x": 0, "y": .1}
        disabled: True
    TextInput:
        id: browseInputIn
        size_hint: .88, .1
        pos_hint: {"x": .12, "y": 0}
        disabled: False
    Button:
        id: submitBrowseInput
        text: "Submit"
        size_hint: .12, .1
        pos_hint: {"x": 0, "y": 0}

<ManageWindow>:
    name: "manageWin"

    GoBackBtn:

<GenerateUsersWindow>:
    name: "generateWin"

    GoBackBtn:

    Label:
        text: 'Generate users'
        size_hint: .9, .2
        pos_hint: {"x": .05, "y": .7}
    GridLayout:
        cols: 2
        size_hint: .9, .2
        pos_hint: {"x": .05, "y": .4}

        Button:
            id: appendUsers
            text: "Append users list"
            halign: 'center'
            valign: 'middle'
            on_release:
                root.btnAppend()

        Button:
            id: deleteAndCreateNewUsers
            text: "Clear users list\nand generate new users"
            halign: 'center'
            valign: 'middle'
            on_release:
                root.btnClearAndGenerate()

<PopCreateAppend>:
    Label:
        text: "amount: "
        size_hint: None, None
        height: 30
        width: 100
        pos_hint: {"center_x": .3, "center_y": .6}

    TextInput:
        size_hint: None, None
        height: 30
        width: 100
        pos_hint: {"center_x": .6, "center_y": .6}

    Button:
        text: "Submit"
        size_hint: .8, .2
        pos_hint: {"center_x": .5, "center_y": .2}


<PopClearAndGenerate>
    Label:
        text: "amount: "
        size_hint: None, None
        height: 30
        width: 100
        pos_hint: {"center_x": .3, "center_y": .7}

    TextInput:
        id: amount_of_users
        size_hint: None, None
        height: 30
        width: 100
        pos_hint: {"center_x": .6, "center_y": .7}
        multiline: False

    Label:
        text: "password: "
        size_hint: None, None
        height: 30
        width: 100
        pos_hint: {"center_x": .3, "center_y": .5}

    TextInput:
        id: password
        password: True
        size_hint: None, None
        height: 30
        width: 100
        pos_hint: {"center_x": .6, "center_y": .5}
        multiline: False

    Button:
        text: "Submit"
        size_hint: .8, .2
        pos_hint: {"center_x": .5, "center_y": .2}
        on_release:
            if password.text == '123':\
            dba.delete_all_users();\
            dba.create_users(int(amount_of_users.text));\
            root.correctPassword()
            else: root.incorrectPassword()

    Label:
        id: incorrectPasswd
        text: ''
        color: 1, 0, 0, 1
        size_hint: .8, .2
        pos_hint: {"center_x": .5, "center_y": .05}

    Label:
        id: correctPasswd
        text: ''
        color: 0, 1, 0, 1
        size_hint: .8, .2
        pos_hint: {"center_x": .5, "center_y": .05}